{% extends 'base.html' %}

<!-- prettier-ignore -->
{% block head %}

<title>
	{{ data.info.symbol }} {{ data.info.regularMarketPrice }} ({{ "%.2f"|format((1
	- (data.info.regularMarketPreviousClose / data.info.regularMarketPrice)) *
	100) }}%)
</title>

{% endblock %}

<!-- prettier-ignore -->
{% block body %}

<div class="mt-4">
	<form action="/" method="POST" id="myForm">
		<div class="mb-3 row justify-content-center">
			<div class="col-sm-4">
				<input
					class="form-control"
					type="text"
					name="symbol"
					placeholder="search tickers (aapl, msft, tsla, ...)"
					aria-label="default input example"
				/>
			</div>
			<button type="submit" class="col-sm-1 btn btn-dark">
				<i class="bi bi-search pe-1"></i>
			</button>
		</div>
	</form>
</div>

{% if data %}

<div class="row align-items-start mt-4">
	<div class="col-2">
		<img src="{{ data.info.logo_url }}" />
	</div>
	<div class="col">
		<p id="symbol" style="display: none">{{ data.info.symbol }}</p>
		<p class="fw-bold fs-6">
			{{ data.info.shortName }} ({{ data.info.symbol }})
		</p>
		<p class="fw-bold fs-2">
			{{ data.info.regularMarketPrice }}
			<span id="current" class="fs-5"
				>(<span id="currentPercent"
					>{{ "%.2f"|format((1 - (data.info.regularMarketPreviousClose /
					data.info.regularMarketPrice)) * 100) }}</span
				>%)</span
			>
		</p>
	</div>
</div>
<div class="flex-nav">
	<div class="nav-item">
		<a href="/">Summary</a>
	</div>
	<div class="nav-item">
		<a href="/holders?symbol={{data.info.symbol.lower()}}">Holders</a>
	</div>
</div>

{% block content scoped%}

<div class="row align-items-start mt-4">
	<div class="col">
		<div class="row">
			<div class="col">
				<table class="table table-font">
					<tbody>
						<tr>
							<td>Previous close</td>
							<td class="fw-bold text-end">
								{{ data.info.regularMarketPreviousClose }}
							</td>
						</tr>

						<tr>
							<td>Open</td>
							<td class="fw-bold text-end">
								{{ data.info.regularMarketOpen }}
							</td>
						</tr>

						<tr>
							<td>Bid</td>
							<td class="fw-bold text-end">{{ data.info.bid }}</td>
						</tr>

						<tr>
							<td>Ask</td>
							<td class="fw-bold text-end">{{ data.info.ask }}</td>
						</tr>

						<tr>
							<td>Day's range</td>
							<td class="fw-bold text-end">
								{{ data.info.regularMarketDayLow }} - {{
								data.info.regularMarketDayHigh }}
							</td>
						</tr>

						<tr>
							<td>52 week range</td>
							<td class="fw-bold text-end">
								{{ data.info.fiftyTwoWeekLow }} - {{ data.info.fiftyTwoWeekHigh
								}}
							</td>
						</tr>

						<tr>
							<td>Volume</td>
							<td class="fw-bold text-end">{{ data.info.volume }}</td>
						</tr>

						<tr>
							<td>Average volumne</td>
							<td class="fw-bold text-end">{{ data.info.averageVolume }}</td>
						</tr>

						<tr>
							<td>Market cap</td>
							<td class="fw-bold text-end">{{ data.info.marketCap }}</td>
						</tr>
					</tbody>
				</table>
			</div>
			<div class="col">
				<table class="table table-font">
					<tbody>
						<tr>
							<td>Market cap</td>
							<td class="fw-bold text-end" id="big-number">
								{{ data.info.marketCap }}
							</td>
						</tr>

						<tr>
							<td>Dividend yeild</td>
							<td class="fw-bold text-end" id="big-number">
								{% if data.info.dividendYield %} {{
								"%.2f"|format(data.info.dividendYield * 100) }}% {% else %} none
								{% endif %}
							</td>
						</tr>

						<tr>
							<td>Quote type</td>
							<td class="fw-bold text-end" id="big-number">
								{{ data.info.quoteType.lower() }}
							</td>
						</tr>
					</tbody>
				</table>
			</div>
		</div>
	</div>
	<div class="col">
		<canvas id="myChart" class="mt-3"></canvas>
	</div>
</div>

{% endblock %} {% endif %}

<!-- prettier-ignore -->
{% endblock %}
